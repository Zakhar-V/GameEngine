#include "Time.hpp"
#include "Frame.hpp"
#include "GLFW/glfw3.h"

namespace Tiny
{
	//---------------------------------------------------------------------------//
	// Timer
	//---------------------------------------------------------------------------//

	//---------------------------------------------------------------------------//
	bool Timer::Startup(void)
	{
		LOG("Startup: Timer");
		m_frame = 0;

		return true;
	}
	//---------------------------------------------------------------------------//
	void Timer::Shutdown(void)
	{
		LOG("Shutdown: Timer");
	}
	//---------------------------------------------------------------------------//
	bool Timer::OnEvent(int _id, void* _arg)
	{
		if (_id == FrameEvent::Begin)
		{
			double _ct = glfwGetTime();
			if (!m_frame)
				m_prevTime = _ct;

			m_deltaTime = (float)(_ct - m_prevTime);
			m_prevTime = _ct;
			m_frame++;
		}

		return false;
	}
	//---------------------------------------------------------------------------//

	//---------------------------------------------------------------------------//
	// 
	//---------------------------------------------------------------------------//
}
